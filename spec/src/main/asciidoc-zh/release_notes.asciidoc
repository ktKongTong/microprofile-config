//
// Copyright (c) 2016-2017 Contributors to the Eclipse Foundation
//
// See the NOTICE file(s) distributed with this work for additional
// information regarding copyright ownership.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// You may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//    http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
// Contributors:
// John D. Ament
// Emily Jiang

[[release_notes]]
// == Release Notes
== 发布说明

// This section documents the changes introduced by individual releases.
本节记录了各个版本的变更。

[[release_notes_30]]
// === Release Notes for MicroProfile Config 3.0

// A full list of changes delivered in the 3.0 release can be found at link:https://github.com/eclipse/microprofile-config/milestone/10?closed=1[MicroProfile Config 3.0 Milestone].

=== MicroProfile Config 3.0 发布说明

3.0 版本的完整变更列表可以在 link:https://github.com/eclipse/microprofile-config/milestone/10?closed=1[MicroProfile Config 3.0 Milestone] 中找到。

// ==== Incompatible Changes
// This release aligns with Jakarta EE 9.1 (link:https://github.com/eclipse/microprofile-config/issues/668[668]), so it won't work with earlier versions of Jakarta or Java EE.

==== 不兼容的变更
本版本与 Jakarta EE 9.1 (link:https://github.com/eclipse/microprofile-config/issues/668[668]) 对齐，所以它不适用于较早版本的 Jakarta 或 Java EE。

// ==== API/SPI Changes
// There are no functional changes introduced in this release, except the dependency updating from javax to jakarta.

==== API/SPI 变更
除了将依赖项从 javax 更新到 jakarta 之外，本版本没有引入任何功能性变更。

// ==== Other Changes
// - @ConfigProperties Javadoc clarification (link:https://github.com/eclipse/microprofile-config/issues/681[681])
// - The Spec and JavaDoc are inconsistent about String Converters (link:https://github.com/eclipse/microprofile-config/issues/680[680])
// - ConfigProviderTest TCK bug (link:https://github.com/eclipse/microprofile-config/issues/664[664])

==== 其他变更
- @ConfigProperties Javadoc 说明 (link:https://github.com/eclipse/microprofile-config/issues/681[681])
- JavaDoc 关于 String 转换器的内容与规范不一致 (link:https://github.com/eclipse/microprofile-config/issues/680[680])
- ConfigProviderTest TCK bug (link:https://github.com/eclipse/microprofile-config/issues/664[664])

[[release_notes_20]]
// === Release Notes for MicroProfile Config 2.0

// A full list of changes delivered in the 2.0 release can be found at link:https://github.com/eclipse/microprofile-config/milestone/8?closed=1[MicroProfile Config 2.0 Milestone].

=== MicroProfile Config 2.0 发布说明

2.0 版本的完整变更列表可以在 link:https://github.com/eclipse/microprofile-config/milestone/8?closed=1[MicroProfile Config 2.0 Milestone] 中找到。

// ==== Incompatible Changes
// - ConfigSource#getPropertyNames is no longer a default method. The implementation of a ConfigSource must implement this method. (link:https://github.com/eclipse/microprofile-config/issues/431[431])
// - Previous versions of the specification would not evaluate Property Expressions. As such, previous working
// configuration may behave differently (if the used configuration contains values with Property Expressions
// syntax). Check the <<property-expressions,Property Expressions>> section on how to go back to the
// previous behaviour.
// - Empty value or other special characters are no longer a valid config value for a particular return type. Refer to the earlier section of this spec for more details.
// In the previous release, the empty value was returned as an empty value. From now on, the empty value will cause `NoSuchElementException` to be thrown.
// (link:https://github.com/eclipse/microprofile-config/issues/446[446]) (link:https://github.com/eclipse/microprofile-config/issues/531[531])
// (link:https://github.com/eclipse/microprofile-config/issues/532[532]) (link:https://github.com/eclipse/microprofile-config/issues/397[397]) (link:https://github.com/eclipse/microprofile-config/issues/633[633])

==== 不兼容的变更
- ConfigSource#getPropertyNames 不再是默认方法。ConfigSource 的具体实现必须实现此方法。 (link:https://github.com/eclipse/microprofile-config/issues/431[431])
- 先前的规范版本不会对属性表达式求值。因此，以前的工作配置可能会有不同的行为（如果使用的配置包含带有属性表达式语法的值）。查看 <<property-expressions,属性表达式>>部分，以了解如何恢复到以前的行为。
- 空值或其他特殊字符不再是特定返回类型的有效配置值。有关更多详细信息，请参阅本规范的前面部分。
 在以前的版本中，空值将返回为空值。从现在开始，空值将导致抛出 `NoSuchElementException` 异常。
(link:https://github.com/eclipse/microprofile-config/issues/446[446]) (link:https://github.com/eclipse/microprofile-config/issues/531[531])
(link:https://github.com/eclipse/microprofile-config/issues/532[532]) (link:https://github.com/eclipse/microprofile-config/issues/397[397]) (link:https://github.com/eclipse/microprofile-config/issues/633[633])

// ==== API/SPI Changes
// - Convenience methods have been added to Config allowing for the retrieval of multi-valued properties as lists instead of arrays (link:https://github.com/eclipse/microprofile-config/issues/496[#496])
// - Enable bulk-extraction of config properties into a separate POJO by introducing `@ConfigProperties` (link:https://github.com/eclipse/microprofile-config/issues/240[240])
// - Enable users to determine the winning source for a configuration value (link:https://github.com/eclipse/microprofile-config/issues/312[312]) (link:https://github.com/eclipse/microprofile-config/issues/43[43])
// - Expose conversion mechanism in Config API (link:https://github.com/eclipse/microprofile-config/issues/492[492])
// - Add unwrap() methods to Config (link:https://github.com/eclipse/microprofile-config/issues/84[84])

==== API/SPI 变更
- Config 中添加了方便的方法，允许将多值属性作为 list 而不是数组获取 (link:https://github.com/eclipse/microprofile-config/issues/496[#496])
- 通过引入 `@ConfigProperties`，实现将配置属性的批量提取到单独的 POJO 中  (link:https://github.com/eclipse/microprofile-config/issues/240[240])
- 允许用户确定某一个配置值的采用的配置源 (link:https://github.com/eclipse/microprofile-config/issues/312[312]) (link:https://github.com/eclipse/microprofile-config/issues/43[43])
- 在 Config API 中公开转换机制 (link:https://github.com/eclipse/microprofile-config/issues/492[492])
- 在 Config 中添加 unwrap() 方法 (link:https://github.com/eclipse/microprofile-config/issues/84[84])

// ==== Functional Changes
// - Support Configuration Profiles so that the corresponding properties associated with the active profile are used (link:https://github.com/eclipse/microprofile-config/issues/418[#418])
// - Provide built-in Converters: OptinalInt, OptionalLong and OptionalDouble (link:https://github.com/eclipse/microprofile-config/issues/513[513])
// - Clarifies that Converters for primitive wrappers apply to primitive types as well (link:https://github.com/eclipse/microprofile-config/issues/520[520])
// - Clarify that nulls cannot be passed in to Converters (link:https://github.com/eclipse/microprofile-config/pull/542[542])
// - Support Property Expressions: This provides a way to set and expand variables in property values (link:https://github.com/eclipse/microprofile-config/issues/118[118])
// - Specify the behaviour when a converter returns null (link:https://github.com/eclipse/microprofile-config/issues/608[608])

==== 功能性变更
- 支持配置文件，以便使用与活动配置文件相关联的相应属性 (link:https://github.com/eclipse/microprofile-config/issues/418[#418])
- 提供内置转换器：OptinalInt、OptionalLong 和 OptionalDouble (link:https://github.com/eclipse/microprofile-config/issues/513[513])
- 明确原始包装器的转换器也适用于原始类型 (link:https://github.com/eclipse/microprofile-config/issues/520[520])
- 明确无法将 null 传递给转换器 (link:https://github.com/eclipse/microprofile-config/pull/542[542])
- 支持属性表达式：这提供了一种设置和解析属性值中变量的方法 (link:https://github.com/eclipse/microprofile-config/issues/118[118])
- 指定转换器返回 null 时的行为 (link:https://github.com/eclipse/microprofile-config/issues/608[608])

// ==== Other Changes
// - Update to Jakarta EE8 APIs for MP 4.0 (link:https://github.com/eclipse/microprofile-config/issues/469[469])
// - Enable MicroProfile Config repo to be built with Java 11 (link:https://github.com/eclipse/microprofile-config/issues/555[555])
// - TCK changes: (link:https://github.com/eclipse/microprofile-config/issues/563[563]) (link:https://github.com/eclipse/microprofile-config/issues/319[319]) (link:https://github.com/eclipse/microprofile-config/issues/573[573])
// - Spec clarification: (link:https://github.com/eclipse/microprofile-config/issues/371[371])

==== 其他变更
- 更新为 Jakarta EE8 API 以适用于 MP 4.0 (link:https://github.com/eclipse/microprofile-config/issues/469[469])
- 允许使用 Java 11 构建 MicroProfile Config 仓库 (link:https://github.com/eclipse/microprofile-config/issues/555[555])
- TCK 变更: (link:https://github.com/eclipse/microprofile-config/issues/563[563]) (link:https://github.com/eclipse/microprofile-config/issues/319[319]) (link:https://github.com/eclipse/microprofile-config/issues/573[573])
- 规范说明: (link:https://github.com/eclipse/microprofile-config/issues/371[371])

[[release_notes_14]]
// === Release Notes for MicroProfile Config 1.4

// A full list of changes delivered in the 1.4 release can be found at link:https://github.com/eclipse/microprofile-config/milestone/7?closed=1[MicroProfile Config 1.4 Milestone].

=== MicroProfile Config 1.4 发布说明

1.4 版本中交付的完整变更列表可以在 link:https://github.com/eclipse/microprofile-config/milestone/7?closed=1[MicroProfile Config 1.4 Milestone] 中找到。

// ==== API/SPI Changes
//
// - Prevent incorrect caching of ConfigProviderResolver (link:https://github.com/eclipse/microprofile-config/issues/265[#265])
// - ConfigProviderResolver classloading issues (link:https://github.com/eclipse/microprofile-config/issues/450[#450]) (link:https://github.com/eclipse/microprofile-config/issues/390[#390])
// - Converter extends Serializable (link:https://github.com/eclipse/microprofile-config/issues/473[#473])

==== API/SPI 变更

- 防止 ConfigProviderResolver 的错误缓存 (link:https://github.com/eclipse/microprofile-config/issues/265[#265])
- ConfigProviderResolver 类加载问题 (link:https://github.com/eclipse/microprofile-config/issues/450[#450]) (link:https://github.com/eclipse/microprofile-config/issues/390[#390])
- Converter 扩展 Serializable (link:https://github.com/eclipse/microprofile-config/issues/473[#473])

// ==== Spec Changes
//
// - Change the priority of implicit converters (link:https://github.com/eclipse/microprofile-config/issues/383[#383])
// - Clarify if @ConfigProperty injected values are bean passivating enabled (link:https://github.com/eclipse/microprofile-config/issues/404[#404])
// - Add built-in converters for byte, short and char (link:https://github.com/eclipse/microprofile-config/issues/386[#386])

==== 规范变更

- 更改隐式转换器的优先级 (link:https://github.com/eclipse/microprofile-config/issues/383[#383])
- 明确 `@ConfigProperty` 注入的值是否启用 bean 钝化 (link:https://github.com/eclipse/microprofile-config/issues/404[#404])
- 为 byte、short 和 char 添加内置转换器 (link:https://github.com/eclipse/microprofile-config/issues/386[#386])

// ==== Other Changes
//
// - Exclude EL API transitive dependency (link:https://github.com/eclipse/microprofile-config/issues/440[#440])
// - Other minor spec wording or Javadoc updates

==== 其他变更

- 排除 EL API 传递依赖 (link:https://github.com/eclipse/microprofile-config/issues/440[#440])
- 其他规范文本和 Javadoc 更新

[[release_notes_13]]
// === Release Notes for MicroProfile Config 1.3
//
// The following changes occurred in the 1.3 release, compared to 1.2
//
// A full list of changes may be found on the link:https://github.com/eclipse/microprofile-config/milestone/4?closed=1[MicroProfile Config 1.3 Milestone]

=== MicroProfile Config 1.3 发布说明

下面是 1.3 版本中相较于 1.2 版本发生的变更。

完整的变更列表可以在 link:https://github.com/eclipse/microprofile-config/milestone/4?closed=1[MicroProfile Config 1.3 Milestone] 中找到。

// ==== API/SPI Changes
//
// No API/SPI changes.

==== API/SPI 变更

无 API/SPI 变更。

// ==== Functional Changes
//
// - The implicit (common sense) converters have been improved and some of the built-in converters are removed from the spec as they are covered by implicit converters. The method invocation sequence on implicit converters are further improved (link:https://github.com/eclipse/microprofile-config/issues/325[#325]).
//
// - Implementations must also support the mapping of a config property to the corresponding environment variable (link:https://github.com/eclipse/microprofile-config/issues/264[#264])

==== 功能变更

- 隐式（通用）转换器已经得到改进，一些内置转换器已从规范中删除，因为它们已被隐式转换器覆盖。进一步改进隐式转换器的方法调用顺序 (link:https://github.com/eclipse/microprofile-config/issues/325[#325])

- 实现必须支持将配置属性映射到相应的环境变量 (link:https://github.com/eclipse/microprofile-config/issues/264[#264])

// ==== Specification Changes
//
// - Specification changes to document
//  (link:https://github.com/eclipse/microprofile-config/issues/348[#348]),
//  (link:https://github.com/eclipse/microprofile-config/issues/325[#325]),
//  (link:https://github.com/eclipse/microprofile-config/issues/264[#264])

==== 规范变更

- 规范文档变更
 (link:https://github.com/eclipse/microprofile-config/issues/348[#348]),
 (link:https://github.com/eclipse/microprofile-config/issues/325[#325]),
 (link:https://github.com/eclipse/microprofile-config/issues/264[#264])

// ==== Other Changes
// More CTS were added:
//
// - Assert URI will be converted (link:https://github.com/eclipse/microprofile-config/issues/322[#322])
//
// - Testing injecting an Optional<String> that has no config value (link:https://github.com/eclipse/microprofile-config/issues/336[#336]).
//
// - Built-in converters are automatically added to the injected config ((link:https://github.com/eclipse/microprofile-config/issues/348[#348])
//
// Java2 security related change (link:https://github.com/eclipse/microprofile-config/issues/343[#343])

==== 其他变更
添加更多 CTS：

- 断言 URI 将被转换 (link:https://github.com/eclipse/microprofile-config/issues/322[#322])

- 测试注入一个没有配置值的 Optional<String> (link:https://github.com/eclipse/microprofile-config/issues/336[#336])

- 内置转换器会自动添加到注入的配置中 ((link:https://github.com/eclipse/microprofile-config/issues/348[#348])

- Java2 安全相关变更 (link:https://github.com/eclipse/microprofile-config/issues/343[#343])

[[release_notes_12]]
// === Release Notes for MicroProfile Config 1.2
//
// The following changes occurred in the 1.2 release, compared to 1.1
//
// A full list of changes may be found on the link:https://github.com/eclipse/microprofile-config/milestone/3?closed=1[MicroProfile Config 1.2 Milestone]

=== MicroProfile Config 1.2 发布说明

下面是 1.2 版本中相较于 1.1 版本发生的变更。

完整的变更列表可以在 link:https://github.com/eclipse/microprofile-config/milestone/3?closed=1[MicroProfile Config 1.2 Milestone] 中找到

// ==== API/SPI Changes
//
// - The `ConfigBuilder` SPI has been extended with a method that allows for a converter with the specified class type to be registered  (link:https://github.com/eclipse/microprofile-config/issues/205[#205]). This change removes the limitation, which was unable to add a lambda converter, from the previous releases.

==== API/SPI 变更

- `ConfigBuilder` SPI 已经扩展了一个方法，允许注册具有指定类类型的转换器 (link:https://github.com/eclipse/microprofile-config/issues/205[#205]). 该变更从之前的版本中删除了无法添加 lambda 转换器的限制。

// ==== Functional Changes
//
// - Implementations must now support the array converter (link:https://github.com/eclipse/microprofile-config/issues/259[#259]).
// For the array converter, the programmatic lookup of a property (e.g. `config.getValue(myProp, String[].class)`) must support the return type of the array. For the injection lookup, an Array, List or Set must be supported as well (e.g. `@Inject @ConfigProperty(name="myProp") private List<String> propValue;`).
//
// - Implementations must also support the common sense converters (link:https://github.com/eclipse/microprofile-config/issues/269[#269]) where there is no corresponding type of converters provided for a given class. The implementation must use the class's constructor with a single string parameter, then try `valueOf(String)` followed by `parse(CharSequence)`.
//
// - Implementations must also support Class converter (link:https://github.com/eclipse/microprofile-config/issues/267[#267])

==== 功能变更

- 现在具体实现必须支持数组转换器 (link:https://github.com/eclipse/microprofile-config/issues/259[#259]).
 对于数组转换器，编程方式查找属性（例如 `config.getValue(myProp, String[].class)`） 必须支持数组的返回类型。对于注入查找，还必须支持 Array、List 或 Set（例如 `@Inject @ConfigProperty(name="myProp") private List<String> propValue;`）。

- 实现还必须支持通用转换器 (link:https://github.com/eclipse/microprofile-config/issues/269[#269]) ，为给定类没有提供相应类型的转换器提供支持。实现必须使用具有单个字符串参数的类的构造函数，然后尝试 `valueOf(String)`，然后尝试 `parse(CharSequence)`。

- 实现还必须支持 Class 转换器 (link:https://github.com/eclipse/microprofile-config/issues/267[#267])

// ==== Specification Changes
//
// - Specification changes to document
//  (link:https://github.com/eclipse/microprofile-config/issues/205[#205]),
//  (link:https://github.com/eclipse/microprofile-config/issues/259[#259]),
//  (link:https://github.com/eclipse/microprofile-config/issues/269[#269])
//  (link:https://github.com/eclipse/microprofile-config/issues/267[#267])

==== 规范变更

- 规范文档变更
 (link:https://github.com/eclipse/microprofile-config/issues/205[#205]),
 (link:https://github.com/eclipse/microprofile-config/issues/259[#259]),
 (link:https://github.com/eclipse/microprofile-config/issues/269[#269])
 (link:https://github.com/eclipse/microprofile-config/issues/267[#267])

// ==== Other Changes
// The API bundle can work with either CDI 1.2 or CDI 2.0 in OSGi environment (link:https://github.com/eclipse/microprofile-config/issues/249[#249]).
//
// A TCK test was added to ensure the search path of `microprofile-config.properties` for a `war` archive is `WEB-INF\classes\META-INF` (link:https://github.com/eclipse/microprofile-config/issues/268[#268])

==== 其他变更
API 包可以在 OSGi 环境中与 CDI 1.2 或 CDI 2.0 一起工作 (link:https://github.com/eclipse/microprofile-config/issues/249[#249])

已添加TCK 测试，确保 `war` 包的 `microprofile-config.properties` 的搜索路径为 `WEB-INF\classes\META-INF` (link:https://github.com/eclipse/microprofile-config/issues/268[#268])

// === Release Notes for MicroProfile Config 1.1
//
// The following changes occurred in the 1.1 release, compared to 1.0
//
// A full list of changes may be found on the link:https://github.com/eclipse/microprofile-config/milestone/2?closed=1[MicroProfile Config 1.1 Milestone]

=== MicroProfile Config 1.1 发布说明

下面是 1.1 版本中相较于 1.0 版本发生的变更。

完整的变更列表可以在 link:https://github.com/eclipse/microprofile-config/milestone/2?closed=1[MicroProfile Config 1.1 Milestone] 中找到。

// ==== API/SPI Changes
//
// - The `ConfigSource` SPI has been extended with a default method that returns the property names for a given `ConfigSource`  (link:https://github.com/eclipse/microprofile-config/issues/178[#178])

==== API/SPI 变更

- `ConfigSource` SPI 扩展了一个默认方法，该方法返回给定 `ConfigSource` 的属性名称  (link:https://github.com/eclipse/microprofile-config/issues/178[#178])

// ==== Functional Changes
//
// - Implementations must now include a `URL` Converter, of `@Priority(1)` (link:https://github.com/eclipse/microprofile-config/issues/181[#181])
// - The format of the default property name for an injection point using `@ConfigProperty` has been changed to no longer lower case the first letter of the class.  Implementations may still support this behavior.  Instead, MicroProfile Config 1.1 requires the actual class name to be used. (link:https://github.com/eclipse/microprofile-config/issues/233[#233])
// - Implementations must now support primitive types, in addition to the already specified primitive type wrappers (link:https://github.com/eclipse/microprofile-config/issues/204[#204])

==== 功能变更

- 实现现在必须包含一个 `URL` 转换器，优先级为 `@Priority(1)` (link:https://github.com/eclipse/microprofile-config/issues/181[#181])
- 改变使用 `@ConfigProperty` 注入点的默认属性名称的格式，不再将类的第一个字母小写。实现仍然可以支持此行为。相对的，MicroProfile Config 1.1 要求使用实际的类名。 (link:https://github.com/eclipse/microprofile-config/issues/233[#233])
- 实现现在必须支持原始类型，除了已经指定的原始类型包装器 (link:https://github.com/eclipse/microprofile-config/issues/204[#204])

// ==== Specification Changes
//
// - Clarified what it means for a value to be present (link:https://github.com/eclipse/microprofile-config/issues/216[#216])

==== 规范变更

- 明确了值表示的含义 (link:https://github.com/eclipse/microprofile-config/issues/216[#216])
